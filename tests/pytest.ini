[pytest]
# Pytest Configuration File for C-Wiper Testing

# 最小 Python 版本
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 测试发现路径
testpaths = tests

# 输出选项
addopts =
    # 详细输出
    -v
    # 显示本地变量（失败时）
    -l
    # 显示测试持续时间
    --durations=10
    # 显示 print 输出
    -s
    # 遵守 PEP8 编码警告
    --ignore-glob=*disabled*
    # 启用严格标记
    --strict-markers

# 标记定义
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    security: marks tests as security-related tests
    performance: marks tests as performance tests

# 覆盖率配置（使用 pytest-cov）
[coverage:run]
source = src
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */site-packages/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod
